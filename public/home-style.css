/* --- CÁC BIẾN MÀU SẮC --- */
:root {
  --bg-body: #f0f2f5;
  --bg-card: #ffffff;
  --primary: #1877f2;
  --text-main: #050505;
  --text-sub: #65676b;
  --hover-bg: #f2f2f2;
  --border: #ced0d4;
  --shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  --header-h: 60px;
  
  /* Màu cảm xúc */
  --like-color: #1877f2;
  --love-color: #f63459;
  --care-color: #f7b125;
  --haha-color: #f7b125;
  --wow-color: #f7b125;
  --sad-color: #f7b125;
  --angry-color: #e4605e;
}

[data-theme="dark"] {
  --bg-body: #18191a;
  --bg-card: #242526;
  --text-main: #e4e6eb;
  --text-sub: #b0b3b8;
  --hover-bg: #3a3b3c;
  --border: #393a3b;
}

body {
  font-family: "Segoe UI", Helvetica, Arial, sans-serif;
  background: var(--bg-body);
  color: var(--text-main);
  margin: 0;
}

/* --- NAV & LAYOUT (Cơ bản) --- */
.navbar { height: var(--header-h); background: var(--bg-card); position: fixed; top: 0; width: 100%; box-shadow: 0 1px 2px rgba(0,0,0,0.1); z-index: 1000; display: flex; justify-content: center; }
.nav-container { display: flex; width: 100%; max-width: 1400px; align-items: center; justify-content: space-between; padding: 0 16px; }
.main-layout { display: flex; justify-content: center; padding-top: 80px; gap: 32px; max-width: 1400px; margin: 0 auto; }
.feed-content { width: 590px; display: flex; flex-direction: column; gap: 20px; }
.sidebar-left, .sidebar-right { width: 280px; position: sticky; top: 80px; height: calc(100vh - 100px); overflow-y: auto; }
.hidden { display: none !important; }

/* --- POST CARD --- */
.post-card {
  background: var(--bg-card);
  border-radius: 8px;
  box-shadow: var(--shadow);
  padding-bottom: 5px;
}
.post-header { padding: 12px 16px; display: flex; align-items: center; gap: 10px; }
.post-header img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
.post-info h3 { font-size: 15px; margin: 0; color: var(--text-main); }
.post-info span { font-size: 13px; color: var(--text-sub); }
.post-content { padding: 0 16px 16px; font-size: 15px; line-height: 1.5; }
.post-image { width: 100%; display: block; height: auto; object-fit: cover; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }

/* --- POST STATS (Số lượng like/comment) --- */
.post-stats {
  padding: 10px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--border);
  color: var(--text-sub);
  font-size: 14px;
}
.reaction-icons-display {
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
}
.reaction-icons-display span {
    display: flex;
    align-items: center;
}
.stat-text:hover { text-decoration: underline; cursor: pointer; }

/* --- POST ACTIONS (Nút Like, Comment) --- */
.post-actions {
  padding: 4px 16px;
  display: flex;
  justify-content: space-between;
  position: relative; /* Quan trọng cho popup */
}

/* Nút Action chung */
.action-btn {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 8px 0;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 600;
  color: var(--text-sub);
  font-size: 14px;
  transition: 0.2s;
  background: transparent;
  border: none;
  gap: 8px;
  position: relative; /* Để căn chỉnh popup */
}
.action-btn:hover { background: var(--hover-bg); }
.action-btn i { font-size: 18px; }

/* --- REACTION POPUP (Thần thái Facebook) --- */
/* Container bao quanh nút Like để xử lý hover */
.reaction-wrapper {
  flex: 1;
  position: relative; /* Popup sẽ tuyệt đối theo cái này */
}

/* Bản thân cái Popup */
.reaction-popup-box {
  position: absolute;
  bottom: 45px; /* Hiện lên trên nút Like */
  left: 10px;
  background: var(--bg-card);
  border-radius: 50px;
  padding: 6px 6px;
  display: flex;
  gap: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  border: 1px solid var(--border);
  
  /* Ẩn mặc định */
  opacity: 0;
  visibility: hidden;
  transform: translateY(10px) scale(0.8);
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 100;
}

/* Hiệu ứng khi hover vào wrapper (nút Like) */
.reaction-wrapper:hover .reaction-popup-box {
  opacity: 1;
  visibility: visible;
  transform: translateY(0) scale(1);
  transition-delay: 0.3s; /* Delay nhẹ để tránh hiện khi lướt qua nhanh */
}

/* Icon cảm xúc trong popup */
.reaction-icon {
  font-size: 28px;
  cursor: pointer;
  transition: transform 0.2s;
  user-select: none;
  line-height: 1;
  display: inline-block;
}

.reaction-icon:hover {
  transform: scale(1.5) translateY(-5px);
}

/* Màu sắc text nút Like khi đã active */
.action-text.liked { color: var(--like-color); }
.action-text.loved { color: var(--love-color); }
.action-text.haha { color: var(--haha-color); }
.action-text.wow { color: var(--wow-color); }
.action-text.sad { color: var(--sad-color); }
.action-text.angry { color: var(--angry-color); }

/* --- COMMENT MODAL --- */
.modal-backdrop {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.7); z-index: 2000;
    display: flex; justify-content: center; align-items: center;
}
.comment-box {
    width: 700px;
    height: 85vh;
    background: var(--bg-card);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 12px 28px rgba(0,0,0,0.3);
}
.modal-header {
    border-bottom: 1px solid var(--border);
    padding: 15px;
    text-align: center;
    position: relative;
}
.close-btn-wrapper {
    position: absolute; right: 15px; top: 12px;
    width: 36px; height: 36px; border-radius: 50%;
    background: var(--hover-bg);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
}
.modal-body.comment-body {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
}
/* Comment Row */
.comment-item { display: flex; gap: 10px; margin-bottom: 10px; }
.comment-item img { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }
.comment-content {
    background: var(--bg-body);
    border-radius: 18px;
    padding: 8px 12px;
    max-width: 90%;
}
[data-theme="dark"] .comment-content { background: #3a3b3c; }

.comment-author { font-weight: 600; font-size: 13px; color: var(--text-main); display: block; margin-bottom: 2px;}
.comment-text { font-size: 15px; margin: 0; line-height: 1.3; }

/* Input Footer */
.comment-input-section {
    padding: 12px 16px;
    border-top: 1px solid var(--border);
    display: flex; gap: 10px; align-items: flex-end;
}
.comment-input-section img { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }
.comment-input-wrapper {
    flex: 1;
    background: var(--bg-body);
    border-radius: 20px;
    padding: 8px 12px;
    display: flex;
    align-items: center;
}
[data-theme="dark"] .comment-input-wrapper { background: #3a3b3c; }
.comment-input-wrapper input {
    width: 100%; border: none; background: transparent; outline: none;
    color: var(--text-main); font-size: 15px;
}
.comment-input-wrapper button {
    background: none; border: none; color: var(--primary);
    font-size: 16px; cursor: pointer; padding: 0 0 0 8px;
}
.comment-input-wrapper button:disabled { color: var(--text-sub); }
